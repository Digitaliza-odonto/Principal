<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Entrevista dialogada</title>
  
  <script type="text/javascript" async="" defer="" src="https://stats.ufpel.edu.br/piwik.js"></script><script type="text/javascript">
      var BASE_URL = 'https://cobalto.ufpel.edu.br/';
      var WIKI = 'http://wikicobalto.ufpel.edu.br/doku.php?';
      var PATH_COOKIE = '/';
      var IMG = 'https://cobalto.ufpel.edu.br/static/_img';
      var JS = 'https://cobalto.ufpel.edu.br/static/_js';
      </script>
      <link rel="shortcut icon" href="https://cobalto.ufpel.edu.br/static/_img/favicon.ico" type="image/ico">
      <link href='https://cobalto.ufpel.edu.br/static/_css/redmond/all.css.jquery-ui.06102023101234850017.css' type='text/css' rel='stylesheet'/>
      <script type='text/javascript' src='https://cobalto.ufpel.edu.br/static/_js/all.javascript.06102023101234850017.js'></script>

      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
  <link href="../../../stylecobalto.css" type="text/css" rel="stylesheet">

    <!--ALERT MESSAGES-->
    <link href="../../../scripts/alert-message.css" type="text/css" rel="stylesheet">
    <script src="../../../scripts/alertMessage.js"></script>

    <!-- HIDDEN DIV FOR ALERT MESSAGE -->
    <div id="customAlert" class="modal">
      <div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-dialog-buttons ui-draggable ui-resizable centered-modal">
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
          <span id="ui-id-12" class="ui-dialog-title">Atenção</span>
          <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close" role="button">
            <span class="close ui-button-icon-primary ui-icon ui-icon-closethick" style="display: flex;  float:right; margin-right: -8px; margin-top: -8px;"></span>
          </button>
        </div>
        <p></p>
        <br>
        <div id="dialog-message-info" style="width: auto; min-height: 0px; max-height: none; height: auto;" class="ui-dialog-content ui-widget-content">
          <span class="ui-icon ui-icon-info" style="float:left; margin:12px 0 0 0;"></span>
          <p id="alertMessage"></p>
        </div>
        <p> </p><br>
        <p> </p><br>
        <p> </p><br>
        <div><button id="okButton" class="centered-button">OK</button></div>
      </div>
    </div>
      <!-- HIDDEN DIV FOR ALERT MESSAGE -->
  </head>

<!-- HIDE/UNHIDE CONTENT BASED ON RADIO BUTTON SELECTION -->
  <script>
    // Function to show/hide content based on radio button selection
    function toggleDisplay(divId, radioName, targetValue) {
    const radioButtons = document.querySelectorAll(`input[name="${radioName}"]`);
    const targetDiv = document.getElementById(divId);

    // Function to handle radio button change
    function handleRadioButtonChange() {
        if (radioButtons[radioButtons.length - 1].checked && radioButtons[radioButtons.length - 1].value === targetValue) {
            targetDiv.style.display = "block"; // Show the target div
        } else {
            targetDiv.style.display = "none"; // Hide the target div
        }
    }

    // Add event listener to each radio button
    radioButtons.forEach(function (radioBtn) {
        radioBtn.addEventListener("change", handleRadioButtonChange);
    });

    // Initialize the state based on the initial selection
    handleRadioButtonChange();
    }

    // Call the function for each set of radio buttons and target divs
    toggleDisplay("displayNotdisplay1", "doenca_YN", "Sim");
    toggleDisplay("displayNotdisplay2", "tto_medico_YN", "Sim");
    toggleDisplay("displayNotdisplay3", "medicacao_YN", "Sim");
    toggleDisplay("displayNotdisplay4", "alergia_YN", "Sim");
    toggleDisplay("displayNotdisplay5", "fumante_YN", "Sim");
    toggleDisplay("displayNotdisplay6", "etilista_YN", "Sim");
    toggleDisplay("displayNotdisplay7", "operado_YN", "Sim");
    toggleDisplay("displayNotdisplay8", "cicatrizacao_YN", "Sim");
    toggleDisplay("displayNotdisplay9", "anestesia_YN", "Sim");
    toggleDisplay("displayNotdisplay10", "hemorragia_YN", "Sim");
    toggleDisplay("displayNotdisplay11", "gravidez_YN", "Sim");
    toggleDisplay("displayNotdisplay12", "probGravidez_YN", "Sim");
    toggleDisplay("displayNotdisplay13", "doencaInfancia_YN", "Sim");
    toggleDisplay("displayNotdisplay14", "internacao_YN", "Sim");
    toggleDisplay("displayNotdisplay15", "historicoMedicacao_YN", "Sim");
    toggleDisplay("displayNotdisplay16", "alergia_YN_Ped", "Sim");
    toggleDisplay("displayNotdisplay17", "respiratorio_YN", "Sim");
    toggleDisplay("displayNotdisplay18", "cardiaco_YN", "Sim");
    toggleDisplay("displayNotdisplay19", "sanguineo_YN", "Sim");
    toggleDisplay("displayNotdisplay20", "diabetes_YN", "Sim");
    toggleDisplay("displayNotdisplay21", "medicacao_YN_Ped", "Sim");
    
    // Function to load content and call toggleDisplay after content is loaded
    function loadContentAndInitialize() {
      fetch('/Gestão-Saúde/tabsProntuarios/entrevistaCadastro.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('entrevistaAdulto').innerHTML = data;
          
          // Call toggleDisplay after the content is loaded
          toggleDisplay("displayNotdisplay1", "doenca_YN", "Sim");
          toggleDisplay("displayNotdisplay2", "tto_medico_YN", "Sim");
          toggleDisplay("displayNotdisplay3", "medicacao_YN", "Sim");
          toggleDisplay("displayNotdisplay4", "alergia_YN", "Sim");
          toggleDisplay("displayNotdisplay5", "fumante_YN", "Sim");
          toggleDisplay("displayNotdisplay6", "etilista_YN", "Sim");
          toggleDisplay("displayNotdisplay7", "operado_YN", "Sim");
          toggleDisplay("displayNotdisplay8", "cicatrizacao_YN", "Sim");
          toggleDisplay("displayNotdisplay9", "anestesia_YN", "Sim");
          toggleDisplay("displayNotdisplay10", "hemorragia_YN", "Sim");
          toggleDisplay("displayNotdisplay11", "gravidez_YN", "Sim");
          toggleDisplay("displayNotdisplay12", "probGravidez_YN", "Sim");
          toggleDisplay("displayNotdisplay13", "doencaInfancia_YN", "Sim");
          toggleDisplay("displayNotdisplay14", "internacao_YN", "Sim");
          toggleDisplay("displayNotdisplay15", "historicoMedicacao_YN", "Sim");
          toggleDisplay("displayNotdisplay16", "alergia_YN_Ped", "Sim");
          toggleDisplay("displayNotdisplay17", "respiratorio_YN", "Sim");
          toggleDisplay("displayNotdisplay18", "cardiaco_YN", "Sim");
          toggleDisplay("displayNotdisplay19", "sanguineo_YN", "Sim");
          toggleDisplay("displayNotdisplay20", "diabetes_YN", "Sim");
          toggleDisplay("displayNotdisplay21", "medicacao_YN_Ped", "Sim");
      })
      .catch(error => {
          console.error('Error:', error);
      });
    }

    // Listen for the 'DOMContentLoaded' event before initializing content
    document.addEventListener('DOMContentLoaded', loadContentAndInitialize);
</script>





  <body>
    <!-- CONTEÚDO DA PÁGINA/TELA PRINCIPAL COBALTO -->
    <div id="content-center" class="ui-layout-center ui-widget-content" style="background: none !important; overflow: hidden !important">
      <div class="breadCrumb module">
        <ul>
          <li><a href="index.html"></a></li><li>Gestão Saúde</li>
          <li>Aluno</li>
          <li>Cadastro</li>
          <li>Entrevista dialogada</li>
        </ul>
        <div style="clear: both;"></div>
      </div>
      <div style="clear: both;"></div>
              
      <!-- CONTEÚDO BOTÕES -->
      <div class="ui-widget-content ui-corner-all toolbar">
        <button id="voltar-pagina" class="voltar-pagina" style="float: left;">Voltar página</button>
        <button id="submitButton" class="salvar" title="Salvar paciente" style="float: left;">Salvar</button>
        <button id="ajuda" class="ajuda" title="F1" style="float: right;">Ajuda</button>
        <span style="clear: both; display: block"></span>
      </div>

      <!-- INÍCIO DIVISÃO EM TABS-->

      <div id="tab" class="tabs ui-tabs ui-widget ui-widget-content ui-corner-all">
        <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
          
          <li class="labeltab ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tab-0" aria-labelledby="ui-id-2" aria-selected="true"><a href="#tab-0" accesskey="tab-0" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Dados pessoais</a></li>

          <li class="labeltab ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-1" aria-labelledby="ui-id-2" aria-selected="false"><a href="#tab-1" accesskey="tab-1" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Adultos</a></li>

          <li class="labeltab ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-2" aria-labelledby="ui-id-3" aria-selected="false"><a href="#tab-2" accesskey="tab-2" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">Odontopediatria</a></li>
                    
        </ul>
       
        <!--INÍCIO DA TAB DADOS PESSOAIS-->
        <div id="tab-0" class="ui-widget tab tab-0 tab-0 ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-2" role="tabpanel" aria-expanded="true" aria-hidden="false">

          <br>
            <div id="entrevistaContent">
              <?php echo file_get_contents('../../tabsProntuarios/capaConsulta.html');     ?>
            </div>                     
        </div>
        

        <!--INÍCIO DA TAB ENTREVISTA DIALOGADA ADULTOS-->
        <div id="tab-1" class="ui-widget tab tab-1 tab-1 ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-2" role="tabpanel" aria-expanded="true" aria-hidden="false">
          
         
            <input type="hidden" id="aluno_id" value="" maxlength="10" class="ui-state-default ui-corner-all mousetrap " style=" width: 32%;" placeholder="BUSCAR AUTOMATICAMENTE DO VÍNCULO"><br>
              <script>
                document.getElementById("aluno_id").value = JSON.parse(localStorage.getItem("usuario"))['Matricula'];
              </script>
              <div id="entrevistaAdulto">
                <?php echo file_get_contents('../../tabsProntuarios/entrevistaCadastro.html');     ?>
              </div>
        </div>
          
        <!--INÍCIO DA TAB PEDIATRIA-->
        <div id="tab-2" class="ui-widget tab tab-2 tab-2 ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-3" role="tabpanel" aria-expanded="true" aria-hidden="false">

          <div id="entrevistaPed">
            <?php echo file_get_contents('../../tabsProntuarios/entrevistaPedCadastro.html');     ?>
          </div>
          

        </div>
      </div>
    </div>
  </body>

  <!-- HIDE/UNHIDE CONTENT BASED ON RADIO BUTTON SELECTION -->
  <script>
    fetch('/Gestão-Saúde/tabsProntuarios/entrevistaCadastro.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('entrevistaAdulto').innerHTML = data;
            
            // Call toggleDisplay after the content is loaded
            toggleDisplay("displayNotdisplay1", "doenca_YN", "Sim");
            toggleDisplay("displayNotdisplay2", "tto_medico_YN", "Sim");
            toggleDisplay("displayNotdisplay3", "medicacao_YN", "Sim");
            toggleDisplay("displayNotdisplay4", "alergia_YN", "Sim");
            toggleDisplay("displayNotdisplay5", "fumante_YN", "Sim");
            toggleDisplay("displayNotdisplay6", "etilista_YN", "Sim");
            toggleDisplay("displayNotdisplay7", "operado_YN", "Sim");
            toggleDisplay("displayNotdisplay8", "cicatrizacao_YN", "Sim");
            toggleDisplay("displayNotdisplay9", "anestesia_YN", "Sim");
            toggleDisplay("displayNotdisplay10", "hemorragia_YN", "Sim");
            toggleDisplay("displayNotdisplay11", "gravidez_YN", "Sim");
            toggleDisplay("displayNotdisplay12", "probGravidez_YN", "Sim");
            toggleDisplay("displayNotdisplay13", "doencaInfancia_YN", "Sim");
            toggleDisplay("displayNotdisplay14", "internacao_YN", "Sim");
            toggleDisplay("displayNotdisplay15", "historicoMedicacao_YN", "Sim");
            toggleDisplay("displayNotdisplay16", "alergia_YN_Ped", "Sim");
            toggleDisplay("displayNotdisplay17", "respiratorio_YN", "Sim");
            toggleDisplay("displayNotdisplay18", "cardiaco_YN", "Sim");
            toggleDisplay("displayNotdisplay19", "sanguineo_YN", "Sim");
            toggleDisplay("displayNotdisplay20", "diabetes_YN", "Sim");
            toggleDisplay("displayNotdisplay21", "medicacao_YN_Ped", "Sim");
        })
        .catch(error => {
            console.error('Error:', error);
        });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    function submitForm() {
      var formContent = {
        id_aluno: $('#aluno_id').val() || '',
        id_disciplina: $('#id_disciplina').val() || '',
        CPF: $('#Cpf').val(),
        queixa: $('#queixa').val() || '',
        doenca_YN: $('#doenca_YN').val() || 'Não',
        doenca: $('#doenca').val() || '',
        tto_medico_YN: $('#tto_medico_YN').val() || 'Não',
        tto_medico: $('#tto_medico').val() || '',
        medicacao_YN: $('#medicacao_YN').val() || 'Não',
        medicacao: $('#medicacao').val() || '',
        alergia_YN: $('#alergia_YN').val() || 'Não',
        alergia: $('#alergia').val() || '',
        fumante_YN: $('#fumante_YN').val() || 'Não',
        fumante: $('#fumante').val() || '',
        etilista_YN: $('#etilista_YN').val() || 'Não',
        etilista: $('#etilista').val() || '',
        ultimaConsulta: $('#ultimaConsulta').val() || '',
        ultimoTTO: $('#ultimoTTO').val() || '',
        freq_higiene: $('#freq_higiene').val() || '',
        instr_higiene: $('#instr_higiene').val() || '',
        fluor: $('#fluor').val() || '',
        operado_YN: $('#operado_YN').val() || 'Não',
        operado: $('#operado').val() || '',
        cicatrizacao_YN: $('#cicatrizacao_YN').val() || 'Não',
        cicatrizacao: $('#cicatrizacao').val() || '',
        anestesia_YN: $('#anestesia_YN').val() || 'Não',
        anestesia: $('#anestesia').val() || '',
        hemorragia_YN: $('#hemorragia_YN').val() || 'Não',
        hemorragia: $('#hemorragia').val() || '',
        gravidez_YN: $('#gravidez_YN').val() || 'Não',
        gravidez: $('#gravidez').val() || '',
        historicoFamiliar: $('#historicoFamiliar').val() || '',
        obs: $('#obs').val() || '',
        medico: $('#medico').val() || '',
        medicoTEL: $('#medicoTEL').val() || '',

        // Pediatria
        id_disciplinaPed: $('#id_disciplinaPed').val() || '',
        queixaPed: $('#queixaPed').val() || '',
        probGravidez_YN: $('#probGravidez_YN').val() || 'Não',
        probGravidez: $('#probGravidez').val() || '',
        tipoParto: $('#tipoParto').val() || '',
        doencaInfancia_YN: $('#doencaInfancia_YN').val() || 'Não',
        doencaInfancia: $('#doencaInfancia').val() || '',
        internacao_YN: $('#internacao_YN').val() || 'Não',
        internacao: $('#internacao').val() || '',
        historicoMedicacao: $('#historicoMedicacao').val() || '',
        alergia_YN_Ped: $('#alergia_YN_Ped').val() || 'Não',
        alergia_Ped: $('#alergia_Ped').val() || '',
        respiratorio_YN: $('#respiratorio_YN').val() || 'Não',
        respiratorio: $('#respiratorio').val() || '',
        cardiaco_YN: $('#cardiaco_YN').val() || 'Não',
        cardiaco: $('#cardiaco').val() || '',
        sanguineo_YN: $('#sanguineo_YN').val() || 'Não',
        sanguineo: $('#sanguineo').val() || '',
        diabetes_YN: $('#diabetes_YN').val() || 'Não',
        diabetes: $('#diabetes').val() || '',
        medicacao_YN_Ped: $('#medicacao_YN_Ped').val() || 'Não',
        medicacao_Ped: $('#medicacao_Ped').val() || '',
        pediatra: $('#pediatra').val() || '',
        telPediatra: $('#telPediatra').val() || '',
        obs_ped: $('#obs_ped').val() || ''
    };

    // Perform API request
    api.entrevistaDialogada.criar(formContent)
        .then(response => {
            if (response.ok) {
                return response.json();
            }
            throw new Error('Network response was not ok.');
        })
        .then(data => {
            console.log(data);
            if (data.message) {
                showCustomAlert('message:', data.message);
            } else {
                console.error('Invalid response format:', data);
                showCustomAlert('Invalid response format.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showCustomAlert('Entrevista dialogada registrada com sucesso');
        });
    }
    
    // Attach click event listener to the submit button
    document.getElementById('submitButton').addEventListener('click', function() {
        // Call the function to submit the form
        submitForm();
    });
});
</script>

</html>
